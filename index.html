<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>NTK</h1>
    <button class="btn btn-submit" id="btnSubmit">Submit</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        $(document).ready(function() {
            console.log('navigator.userAgent: ', navigator.userAgent);

            $(document).on('click', '#btnSubmit', function (e) {
                e.preventDefault();
                $('#btnSubmit').addClass('disabled');
            });

            window.addEventListener('beforeunload', function (e) {
                if(!$('#btnSubmit').hasClass('disabled')) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            })

            window.addEventListener("pagehide", function (e) {
                if(!$('#btnSubmit').hasClass('disabled')) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            }, false);   

            window.addEventListener('visibilitychange ', function (e) {
                if(!$('#btnSubmit').hasClass('disabled')) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            }, false)
        });
    </script>
</body>

</html>